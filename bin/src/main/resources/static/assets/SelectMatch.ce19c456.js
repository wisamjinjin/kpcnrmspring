import{m as M,Q as k}from"./messageCommon.5db82364.js";import{i as P,r as c,o as F,a as n,d,w as r,aj as E,ae as s,b as g,f as m,e as p,c as L,aZ as G,F as O,ah as l,a$ as U,af as Y,b8 as T,u as w}from"./index.c44c2320.js";import{Q as $}from"./QList.72d1a296.js";import{Q as j}from"./QPage.80b32476.js";import{f as z,b as K,a as W,A as Z,s as J}from"./sessionFunctions.3c5066a4.js";import{f as A}from"./formatTimeToLocal.04abce99.js";import{n as Q}from"./navigate.3bf18681.js";import{_ as X}from"./plugin-vue_export-helper.21dcd24c.js";import"./urls.d05eee06.js";const h={class:"text-h6"},ee={key:1},te={__name:"SelectMatch",emits:["update-status"],setup(se,{emit:B}){const D={U:"GET_ALL_APPROVED_MATCHES",H:"GET_ALLMATCHES",M:"GET_MYMATCHES"},C=B,u=z(["tableName","userContext","venueCd"]);let f={};const S=P(),o=c([]),_=c(null),b=c(!1),v=c(""),N=async()=>{const a=D[f.userType];try{const e=await W.get(Z[a],{params:{telno:f.telno,venueCd:u.venueCd}});o.value=e.data.map(t=>({...t,statusCode:R(t.bid_open_datetime,t.bid_close_datetime,t.bid_open_status)}))}catch(e){H(e)}},R=(a,e,t)=>{if(t==="F")return"\uB099\uCC30\uC885\uB8CC";if(!a||!e)return"\uC0C1\uD0DC \uC815\uBCF4 \uC5C6\uC74C";const i=new Date,y=new Date(a),I=new Date(e);return i<y?"\uC785\uCC30 \uC2DC\uC791 \uC804":i>I?"\uC785\uCC30 \uC885\uB8CC":"\uC785\uCC30 \uC911"},q=a=>{const e=o.value[a];J(u.userContext,{matchNumber:e.match_no}),_.value=_.value===a?null:a,v.value="",C("update-status",{isLoggedIn:!0,hasSelectedMatch:!0}),Q(S,u.userContext,"bids")},x=()=>{Q(S,u.userContext,"login")},V=()=>{C("update-status",{isLoggedIn:!1,hasSelectedMatch:!1})},H=a=>{v.value=a.response?a.response.data:a.request?M.ERR_NETWORK:M.ERR_ETC};return F(async()=>{b.value=u.tableName==="admin",f=await K(u.userContext),f.success||(V(),x()),await N()}),(a,e)=>(n(),d(j,{class:"common-container q-pa-md"},{default:r(()=>[!o.value||o.value.length===0?(n(),d(E,{key:0},{default:r(()=>[e[1]||(e[1]=s("br",null,null,-1)),e[2]||(e[2]=s("br",null,null,-1)),e[3]||(e[3]=s("br",null,null,-1)),g(k,null,{default:r(()=>e[0]||(e[0]=[m("\uD604\uC7AC \uB300\uD68C \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.")])),_:1}),e[4]||(e[4]=s("br",null,null,-1)),e[5]||(e[5]=s("br",null,null,-1)),e[6]||(e[6]=s("br",null,null,-1))]),_:1})):p("",!0),o.value&&o.value.length>0?(n(),d($,{key:1},{default:r(()=>[(n(!0),L(O,null,G(o.value,(t,i)=>(n(),d(E,{key:i,onClick:y=>q(i),class:U([{"bg-primary text-white":_.value===i},"q-mb-md q-pa-md match-card"]),clickable:"",bordered:""},{default:r(()=>[g(Y,null,{default:r(()=>[s("div",h,l(t.match_name)+" "+l(t.round)+" : "+l(t.venue_name),1),g(T,{spaced:""}),s("div",null,[e[7]||(e[7]=s("strong",null,"\uACBD\uAE30\uBC88\uD638:",-1)),m(" "+l(t.match_no)+" "+l(t.statusCode),1),e[8]||(e[8]=s("br",null,null,-1)),e[9]||(e[9]=s("strong",null,"\uACBD\uAE30 \uC77C\uC2DC:",-1)),m(" "+l(t.start_date)+"\uC77C "+l(t.start_time)+" ~ "+l(t.end_time),1),e[10]||(e[10]=s("br",null,null,-1)),e[11]||(e[11]=s("strong",null,"\uC785\uCC30 \uAE30\uAC04:",-1)),m(" "+l(w(A)(t.bid_open_datetime))+" ~ "+l(w(A)(t.bid_close_datetime)),1)]),b.value?(n(),d(T,{key:0,spaced:""})):p("",!0),b.value?(n(),L("div",ee,[e[12]||(e[12]=s("strong",null,"\uC2B9\uC778 \uC0C1\uD0DC:",-1)),m(" "+l(t.approved==="Y"?"\uC2B9\uC778":"\uBBF8\uC2B9\uC778"),1)])):p("",!0)]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1})):p("",!0),v.value?(n(),d(k,{key:2,class:"q-mt-md",type:"warning"},{default:r(()=>[m(l(v.value),1)]),_:1})):p("",!0)]),_:1}))}};var pe=X(te,[["__scopeId","data-v-fb5a8af6"]]);export{pe as default};
