import{i as L,r as p,o as R,a as c,d as f,w as l,ae as b,b as t,af as g,ag as w,Q as i,f as I,ah as E,e as N,ai as $,aj as B}from"./index.c44c2320.js";import{Q as M}from"./QForm.dd25b1b3.js";import{Q as A,m as Q}from"./messageCommon.5db82364.js";import{Q as D}from"./QPage.80b32476.js";import{f as S,b as P,a as O,A as j}from"./sessionFunctions.3c5066a4.js";import{n as z}from"./navigate.3bf18681.js";import{_ as F}from"./plugin-vue_export-helper.21dcd24c.js";import"./urls.d05eee06.js";const G={class:"q-gutter-md"},H={__name:"UserLogin",emits:["update-status"],setup(K,{emit:T}){const U=L(),d=T,o=p({query:"",password:""}),v=p(!1),r=p(""),a=S(["tableName","userContext"]);let m={};const u=(s,e)=>z(U,a.userContext,s,{tab:e}),V=async()=>{if(!!h())try{const s=await O.post(j.USER_LOGIN,{...o.value,queryType:"telno",table:a.tableName,userContext:a.userContext},{withCredentials:!0});y(a.userContext)===s.data.userType?(d("update-status",{isLoggedIn:!0,hasSelectedMatch:!1}),u("selectVenue")):k(s.data.userType)}catch(s){console.error("----------------------------------\uB85C\uADF8\uC778 \uC911 \uC624\uB958 \uBC1C\uC0DD",s),x(s)}},h=()=>o.value.query.trim()?o.value.password.trim()?!0:(alert("\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694."),!1):(alert("\uC804\uD654\uBC88\uD638\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694."),!1),k=s=>{const e=y(a.userContext);r.value="\uD604\uC7AC \uC2DC\uC2A4\uD15C\uC5D0 \uAD8C\uD55C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.",console.log(`\uD604\uC7AC \uC2DC\uC2A4\uD15C\uC5D0 \uAD8C\uD55C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. db Type => ${s}, \uD5C8\uC6A9\uB41C \uD0C0\uC785 => ${e}`),C()},y=s=>({user:"U",adminm:"M",admin:"H",default:"unknown"})[s]||"unknown",C=()=>d("update-status",{isLoggedIn:!1,hasSelectedMatch:!1}),q=async()=>{console.log("11111111111111",a.userContext),console.log("22222222222222",a.tableName),S(["tableName","userContext","venueCd"]),v.value=a.userContext==="admin",console.log("33333333333333",a.userContext),console.log("44444444444444",a.tableName),m=await P(a.userContext),m.success?(r.value=`${m.userName}\uB2D8\uC740 \uB85C\uADF8\uC778 \uC0C1\uD0DC\uC785\uB2C8\uB2E4.`,d("update-status",{isLoggedIn:!0,hasSelectedMatch:!1})):(C(),r.value="\uB85C\uADF8\uC778 \uD574 \uC8FC\uC138\uC694")},x=s=>{r.value=s.response?s.response.data:s.request?Q.ERR_NETWORK:Q.ERR_ETC},_=()=>{};return R(async()=>{q()}),(s,e)=>(c(),f(D,{class:"q-pa-md"},{default:l(()=>[b("div",G,[t(B,{class:"q-pa-md"},{default:l(()=>[t(g,null,{default:l(()=>e[5]||(e[5]=[b("div",{class:"text-center"},"\uB85C\uADF8\uC778",-1)])),_:1}),t(g,null,{default:l(()=>[t(M,{class:"q-gutter-md"},{default:l(()=>[t(w,{modelValue:o.value.query,"onUpdate:modelValue":[e[0]||(e[0]=n=>o.value.query=n),_],label:"\uC804\uD654\uBC88\uD638",hint:"\uC804\uD654\uBC88\uD638 11\uC790\uB9AC",filled:"",type:"tel",maxlength:"11",minlength:"11"},null,8,["modelValue"]),t(w,{modelValue:o.value.password,"onUpdate:modelValue":[e[1]||(e[1]=n=>o.value.password=n),_],label:"\uC554\uD638",type:"password",hint:"\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD558\uC138\uC694",filled:""},null,8,["modelValue"])]),_:1})]),_:1}),t(i,{onClick:V,type:"submit",label:"\uB85C\uADF8\uC778",color:"primary"}),r.value?(c(),f(g,{key:0},{default:l(()=>[t(A,{type:"warning"},{default:l(()=>[I(E(r.value),1)]),_:1})]),_:1})):N("",!0),t($,{align:"around"},{default:l(()=>[t(i,{label:"\uBE44\uBC00\uBC88\uD638 \uCC3E\uAE30",onClick:e[2]||(e[2]=n=>u("password",1)),flat:"",color:"standard"}),t(i,{label:"\uBE44\uBC00\uBC88\uD638 \uBCC0\uACBD",onClick:e[3]||(e[3]=n=>u("password",2)),flat:""}),v.value?N("",!0):(c(),f(i,{key:0,label:"\uD68C\uC6D0\uAC00\uC785",onClick:e[4]||(e[4]=n=>u("register")),flat:""}))]),_:1})]),_:1})])]),_:1}))}};var te=F(H,[["__scopeId","data-v-696058a8"]]);export{te as default};
